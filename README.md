# Code-Knack

A widget which transforms you code into a runnable editor to run code inline.

- Mobile compatibility
- Allow to run code in browser or at server(implement yourself)
- Good looking
- Syntax highlight and editor (powered by [CodeMirror](http://codemirror.net/))
- Multi-languages support (powered by different projects, see table followed)

## Demo

- [Simple Demo](https://lyricat.github.io/code-knack/demo/)
- [My Blog](https://lyric.im)

## How to use

### For browser

1. use the production version in `/dist`

```html
<script src="./code-knack.min.js" type="application/javascript"></script>
```

2. CodeKnack uses [CodeMirror](http://codemirror.net/) as the editor, so you need to link CodeMirror's script and css files

```html
<link rel="stylesheet", href="./lib/codemirror/codemirror.css"></link>
<link rel="stylesheet", href="./lib/codemirror/theme/monokai.css"></link>
<script src="./lib/codemirror/codemirror.js" type="application/javascript"></script>
```

3. Configure CodeKnack and init.

if you use the default output of [marked](https://marked.js.org), you don't need to specify `elements` and `guessLang`. Or you need to find all elements contain code(usually in pre > code) and implement `guessLang`(a function uses a element as argument and return language name in lowercases)

```javascript
 var codeKnack = new CodeKnack({
    codeKnackPath: './lib/code-knack',  // the resource path of code-knack
    elements: elements,                 // an array contains elements with code
    guessLang: guessLang,               // a function to guess langauge in each element
    enabledLanguages: langs,            // enabled language array
    languages: {                        // language config
      'javascript': {                   
        mode: 'browser',                      // use browser based implement
        scripts: ['./lib/codemirror/mode/javascript/javascript.js'],    // required script
      },
      'scheme': {
          mode: 'browser',
          scripts: ['./lib/codemirror/mode/scheme/scheme.js', './lib/engines/biwascheme-min.js'],  // load biwascheme to enable scheme implement
      },
      'css': {
          mode: 'view',                 // mode == 'view', can not run.
          scripts: ['./lib/codemirror/mode/css/css.js'],
      },
      ...
    }
 })
 codeKnack.init()
```

See [Demo](https://github.com/lyricat/code-knack/tree/master/docs/demo) for more details.

### For npm package

WIP

## CodeKnack Options

| Options | Defaults | Description |
| --- | --- | --- |
| codeKnackPath | '/lib/code-knack/' | path to CodeKnack's resource |
| elements | will use the `pre > code` elements generated by [marked](https://marked.js.org/) package | an array contains elements with code |
| guessLang | will guess the language from `pre > code` elements generated by [marked](https://marked.js.org/) package | a function to guess langauge in each element |
| enabledLanguages| - | enabled language array |
| languages | - | see followed |

### CodeKnack Language Options

| Options | Defaults | Description |
| --- | --- | --- |
| mode | - | 'view', 'browser' or 'proxy' |
| proxyUrl| - | required option when mode == 'proxy'. A url to handle code |
| scripts | - | required option when mode == 'browser'. Scripts to run, CodeKnack injects them into HTML |

## Support Languages


| Language | Implement |
| --- | --- |
| C/CPP 	| [JSCPP](https://github.com/felixhao28/JSCPP) |
| javascript 	| - |
| python 2.7	| [Skulpt](skulpt.org) |
| ruby		| [Opal](https://opalrb.com/#) |
| scheme	| [Biwascheme](https://www.biwascheme.org) |
| swift		| [iSwift](https://iswift.org/) |


## Developement

install dependences.

```bash
$ npm install
```

build dev version

```bash
$ npm run dev
```


build production version

```bash
$ npm run prod
```
